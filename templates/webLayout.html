<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Clue-Less Lobby Test</title>
  <!-- Include the Socket.IO client library (ensure version compatibility with Flask-SocketIO) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }
    section {
      margin-bottom: 30px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    button {
      padding: 8px 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    input {
      padding: 8px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    .error {
      color: #ff0000;
      margin-top: 10px;
    }
    .success {
      color: #4CAF50;
      margin-top: 10px;
    }
    .warning {
      color: #ff6600;
      margin-top: 10px;
    }
    .players-list {
      margin-top: 15px;
    }
    .player-item {
      padding: 5px;
      margin-bottom: 5px;
      background-color: #f9f9f9;
      border-radius: 3px;
    }
    .host-indicator {
      font-weight: bold;
      color: #ff6600;
    }
    .game-controls {
      display: none;
    }
    .status-bar {
      background-color: #f0f0f0;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 15px;
      text-align: center;
    }
    .notification {
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
    }
    .clearfix {
      clear: both;
      margin-bottom: 10px;
    }

    /* Game Board Styles */
    .game-board {
      display: grid;
      grid-template-columns: 100px 80px 100px 80px 100px;
      grid-template-rows: 60px 100px 80px 100px 80px 100px 60px;
      gap: 2px;
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
      background-color: #f0f0f0;
      padding: 10px;
      border: 2px solid #333;
    }

    .room {
      background-color: #fff;
      border: 2px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-weight: bold;
      position: relative;
      padding: 5px;
    }

    .hallway {
      background-color: #ddd;
      border: 1px dashed #777;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-size: 0.8em;
      position: relative;
    }

    .starter-square {
      background-color: #f8f8f8;
      border: 1px dotted #999;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-size: 0.8em;
      position: relative;
    }

    /* Player tokens */
    .player-token {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      position: absolute;
      border: 1px solid #333;
      box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    /* Position players in different locations within the cell */
    .player-position-0 { top: 5px; left: 5px; }
    .player-position-1 { top: 5px; right: 5px; }
    .player-position-2 { bottom: 5px; left: 5px; }
    .player-position-3 { bottom: 5px; right: 5px; }
    .player-position-4 { top: 5px; left: 50%; transform: translateX(-50%); }
    .player-position-5 { left: 5px; top: 50%; transform: translateY(-50%); }

    /* Character colors */
    .character-scarlet { background-color: #ff0000; }
    .character-mustard { background-color: #ffcc00; }
    .character-white { background-color: #ffffff; border: 2px solid #999; }
    .character-green { background-color: #00cc00; }
    .character-peacock { background-color: #0066ff; }
    .character-plum { background-color: #990099; }

    /* Grid positions for rooms */
    #study { grid-column: 1; grid-row: 2; }
    #hall { grid-column: 3; grid-row: 2; }
    #lounge { grid-column: 5; grid-row: 2; }
    #library { grid-column: 1; grid-row: 4; }
    #billiard { grid-column: 3; grid-row: 4; }
    #dining { grid-column: 5; grid-row: 4; }
    #conservatory { grid-column: 1; grid-row: 6; }
    #ballroom { grid-column: 3; grid-row: 6; }
    #kitchen { grid-column: 5; grid-row: 6; }

    /* Hallways */
    #study_hall { grid-column: 2; grid-row: 2; }
    #hall_lounge { grid-column: 4; grid-row: 2; }
    #study_library { grid-column: 1; grid-row: 3; }
    #hall_billiard { grid-column: 3; grid-row: 3; }
    #lounge_dining { grid-column: 5; grid-row: 3; }
    #library_billiard { grid-column: 2; grid-row: 4; }
    #billiard_dining { grid-column: 4; grid-row: 4; }
    #library_conservatory { grid-column: 1; grid-row: 5; }
    #billiard_ballroom { grid-column: 3; grid-row: 5; }
    #dining_kitchen { grid-column: 5; grid-row: 5; }
    #conservatory_ballroom { grid-column: 2; grid-row: 6; }
    #ballroom_kitchen { grid-column: 4; grid-row: 6; }

    /* Starter squares */
    #scarlet_start { grid-column: 3; grid-row: 1; }
    #mustard_start { grid-column: 5; grid-row: 3; margin-left: 10px; }
    #white_start { grid-column: 4; grid-row: 7; }
    #green_start { grid-column: 2; grid-row: 7; }
    #peacock_start { grid-column: 1; grid-row: 5; margin-left: -10px; }
    #plum_start { grid-column: 1; grid-row: 3; margin-left: -10px; }

    /* Helper classes */
    .move-option {
      cursor: pointer;
      box-shadow: 0 0 5px 2px rgba(0, 255, 0, 0.5);
    }

    .move-hint {
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0, 255, 0, 0.7);
      color: white;
      padding: 2px 5px;
      border-radius: 3px;
      font-size: 0.7em;
      white-space: nowrap;
    }

    /* Secret passage indicators */
    .secret-passage {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #666;
      border-radius: 50%;
    }
    .study .secret-passage { bottom: 5px; right: 5px; }
    .kitchen .secret-passage { top: 5px; left: 5px; }
    .lounge .secret-passage { bottom: 5px; left: 5px; }
    .conservatory .secret-passage { top: 5px; right: 5px; }

    .player-list-table {
      width: 100%;
      margin-top: 15px;
      border-collapse: collapse;
    }
    .player-list-table th, .player-list-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    .player-list-table th {
      background-color: #f2f2f2;
    }
    .player-list-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    .current-turn { font-weight: bold; background-color: #e6f7ff; }

    .move-option-btn {
      margin: 5px;
      padding: 8px 12px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
    }

    .move-option-btn:hover {
      background-color: #45a049;
    }

    /* Card styles */
    .cards-container {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
    }

    .card {
      display: inline-block;
      width: 100px;
      height: 140px;
      margin: 5px;
      padding: 5px;
      border: 1px solid #333;
      border-radius: 5px;
      background-color: white;
      box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
      text-align: center;
      position: relative;
      vertical-align: top;
    }

    .card-suspect { border-color: #f44336; }
    .card-weapon { border-color: #2196F3; }
    .card-room { border-color: #4CAF50; }

    .card-title {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 0.9em;
    }

    .card-type {
      position: absolute;
      bottom: 5px;
      right: 5px;
      font-size: 0.7em;
      color: #666;
    }

    /* Suggestion/Accusation form styles */
    .action-form {
      margin-top: 15px;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
    }

    .form-title {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .form-group {
      margin-bottom: 10px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
    }

    .form-group select {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .suggestion-history {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      max-height: 200px;
      overflow-y: auto;
    }

    .suggestion-item {
      padding: 5px;
      margin-bottom: 5px;
      border-bottom: 1px solid #eee;
    }

    .suggestion-disproved {
      color: #999;
    }
  </style>

  <script src="{{ url_for('static', filename='js/MainFunctionality.js') }}" defer></script>

</head>
<body>
  <h1>Clue-Less Lobby Test</h1>

  <!-- Section to host a new lobby -->
  <section id="hostSection">
    <h2>Host Lobby</h2>
    <input type="text" id="hostName" placeholder="Your Name">
    <button id="hostLobbyBtn">Host Lobby</button>
    <div id="hostResult"></div>
  </section>

  <hr>

  <!-- Section to join an existing lobby -->
  <section id="joinSection">
    <h2>Join Lobby</h2>
    <div id="lobbyNotification" class="notification" style="display: none;"></div>
    <input type="text" id="joinName" placeholder="Your Name">
    <input type="text" id="joinLobbyId" placeholder="Lobby ID">
    <button id="joinLobbyBtn">Join Lobby</button>
    <div id="joinResult"></div>
  </section>

  <hr>

  <!-- Lobby status and controls -->
  <section id="lobbySection" style="display: none;">
    <h2>Lobby Status</h2>
    <div id="lobbyInfo"></div>
    <div id="playersContainer" class="players-list"></div>
    <div id="startGameContainer" style="margin-top: 20px;">
      <button id="startGameBtn" disabled>Start Game (Need at least 3 players)</button>
      <div id="startGameResult"></div>
    </div>
  </section>

  <!-- Game in progress section -->
  <section id="gameSection" style="display: none;">
    <h2>Game in Progress</h2>
    <div id="gameStatus" class="status-bar"></div>

    <div class="game-board-container">
      <h3>Game Board</h3>
      <div id="gameBoard" class="game-board">
        <!-- Rooms -->
        <div id="study" class="room">
          Study
          <div class="secret-passage" title="Secret passage to Kitchen"></div>
        </div>
        <div id="hall" class="room">Hall</div>
        <div id="lounge" class="room">
          Lounge
          <div class="secret-passage" title="Secret passage to Conservatory"></div>
        </div>
        <div id="library" class="room">Library</div>
        <div id="billiard" class="room">Billiard Room</div>
        <div id="dining" class="room">Dining Room</div>
        <div id="conservatory" class="room">
          Conservatory
          <div class="secret-passage" title="Secret passage to Lounge"></div>
        </div>
        <div id="ballroom" class="room">Ballroom</div>
        <div id="kitchen" class="room">
          Kitchen
          <div class="secret-passage" title="Secret passage to Study"></div>
        </div>

        <!-- Hallways -->
        <div id="study_hall" class="hallway"></div>
        <div id="hall_lounge" class="hallway"></div>
        <div id="study_library" class="hallway"></div>
        <div id="hall_billiard" class="hallway"></div>
        <div id="lounge_dining" class="hallway"></div>
        <div id="library_billiard" class="hallway"></div>
        <div id="billiard_dining" class="hallway"></div>
        <div id="library_conservatory" class="hallway"></div>
        <div id="billiard_ballroom" class="hallway"></div>
        <div id="dining_kitchen" class="hallway"></div>
        <div id="conservatory_ballroom" class="hallway"></div>
        <div id="ballroom_kitchen" class="hallway"></div>

        <!-- Starter Squares -->
        <div id="scarlet_start" class="starter-square">Miss Scarlet</div>
        <div id="mustard_start" class="starter-square">Col. Mustard</div>
        <div id="white_start" class="starter-square">Mrs. White</div>
        <div id="green_start" class="starter-square">Mr. Green</div>
        <div id="peacock_start" class="starter-square">Mrs. Peacock</div>
        <div id="plum_start" class="starter-square">Prof. Plum</div>
      </div>

      <div id="turnInfo" class="status-bar">Waiting for game to start...</div>

      <!-- Player Cards -->
      <div id="cardsContainer" class="cards-container" style="display: none;">
        <h3>Your Cards</h3>
        <div id="playerCards"></div>
      </div>

      <div id="playerPositions">
        <h3>Player Positions</h3>
        <table id="playerPositionsTable" class="player-list-table">
          <thead>
            <tr>
              <th>Player</th>
              <th>Character</th>
              <th>Current Position</th>
            </tr>
          </thead>
          <tbody id="playerPositionsBody">
            <!-- Will be populated with player positions -->
          </tbody>
        </table>
      </div>

      <div id="moveOptions" style="margin-top: 20px; display: none;">
        <h3>Your Move Options</h3>
        <div id="moveOptionsContainer"></div>
        <div id="moveResult"></div>
      </div>

      <!-- Suggestion Form -->
      <div id="suggestionForm" class="action-form" style="display: none;">
        <div class="form-title">Make a Suggestion</div>
        <p id="currentRoom"></p>
        <div class="form-group">
          <label for="suggestSuspect">Suspect:</label>
          <select id="suggestSuspect">
            <option value="">Select a suspect...</option>
            <option value="Miss Scarlet">Miss Scarlet</option>
            <option value="Colonel Mustard">Colonel Mustard</option>
            <option value="Mrs. White">Mrs. White</option>
            <option value="Mr. Green">Mr. Green</option>
            <option value="Mrs. Peacock">Mrs. Peacock</option>
            <option value="Professor Plum">Professor Plum</option>
          </select>
        </div>
        <div class="form-group">
          <label for="suggestWeapon">Weapon:</label>
          <select id="suggestWeapon">
            <option value="">Select a weapon...</option>
            <option value="Candlestick">Candlestick</option>
            <option value="Knife">Knife</option>
            <option value="Lead Pipe">Lead Pipe</option>
            <option value="Revolver">Revolver</option>
            <option value="Rope">Rope</option>
            <option value="Wrench">Wrench</option>
          </select>
        </div>
        <button id="makeSuggestionBtn">Make Suggestion</button>
        <button id="skipSuggestionBtn">Skip (End Turn)</button>
      </div>

      <!-- Accusation Form -->
      <div id="accusationForm" class="action-form" style="display: none;">
        <div class="form-title">Make an Accusation</div>
        <div class="form-group">
          <label for="accuseSuspect">Suspect:</label>
          <select id="accuseSuspect">
            <option value="">Select a suspect...</option>
            <option value="Miss Scarlet">Miss Scarlet</option>
            <option value="Colonel Mustard">Colonel Mustard</option>
            <option value="Mrs. White">Mrs. White</option>
            <option value="Mr. Green">Mr. Green</option>
            <option value="Mrs. Peacock">Mrs. Peacock</option>
            <option value="Professor Plum">Professor Plum</option>
          </select>
        </div>
        <div class="form-group">
          <label for="accuseWeapon">Weapon:</label>
          <select id="accuseWeapon">
            <option value="">Select a weapon...</option>
            <option value="Candlestick">Candlestick</option>
            <option value="Knife">Knife</option>
            <option value="Lead Pipe">Lead Pipe</option>
            <option value="Revolver">Revolver</option>
            <option value="Rope">Rope</option>
            <option value="Wrench">Wrench</option>
          </select>
        </div>
        <div class="form-group">
          <label for="accuseRoom">Room:</label>
          <select id="accuseRoom">
            <option value="">Select a room...</option>
            <option value="Study">Study</option>
            <option value="Hall">Hall</option>
            <option value="Lounge">Lounge</option>
            <option value="Library">Library</option>
            <option value="Billiard Room">Billiard Room</option>
            <option value="Dining Room">Dining Room</option>
            <option value="Conservatory">Conservatory</option>
            <option value="Ballroom">Ballroom</option>
            <option value="Kitchen">Kitchen</option>
          </select>
        </div>
        <button id="makeAccusationBtn">Make Accusation</button>
        <button id="cancelAccusationBtn">Cancel</button>
      </div>

      <!-- Disprove Suggestion Form -->
      <div id="disproveForm" class="action-form" style="display: none;">
        <div class="form-title">Disprove Suggestion</div>
        <div id="suggestionToDisprove"></div>
        <div class="form-group">
          <label for="cardToShow">Select a card to show:</label>
          <select id="cardToShow">
            <option value="">Select a card...</option>
            <!-- Will be populated dynamically -->
          </select>
        </div>
        <button id="showCardBtn">Show Card</button>
        <button id="cannotDisproveBtn">Cannot Disprove</button>
      </div>

      <!-- Suggestion History -->
      <div id="suggestionHistory" class="suggestion-history" style="display: none;">
        <h3>Suggestion History</h3>
        <div id="suggestionHistoryList"></div>
      </div>
    </div>

    <div id="gameControls" style="margin-top: 20px;">
      <button id="nextTurnBtn" style="display: none;">Next Turn</button>
      <button id="makeAccusationBtn2" style="display: none;">Make Accusation</button>
      <div id="turnResult"></div>
    </div>
  </section>

  
</body>
</html>